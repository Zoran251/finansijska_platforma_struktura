<!DOCTYPE html>
<html lang="sr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golden Balance | Admin Panel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        :root {
            --gold-bright: #D4AF37; /* Svetla zlatna */
            --gold-medium: #C5A028; /* Srednja zlatna */
            --gold-dark: #A8861D; /* Tamna zlatna */
            --gold-pale: #E6C870; /* Bleda zlatna */
            --gradient-gold: linear-gradient(135deg, #D4AF37, #C5A028, #A8861D); /* Zlatni gradijent */
            --gradient-gold-light: linear-gradient(135deg, #E6C870, #D4AF37); /* Svetli zlatni gradijent */
            --gradient-gold-dark: linear-gradient(135deg, #A8861D, #856614); /* Tamni zlatni gradijent */
            --dark-bg: #0E0E10; /* Tamna pozadina */
            --dark-card: #16161A; /* Tamna kartica */
            --dark-accent: #222224; /* Tamni akcentni element */
            --light-text: #F8F8FF; /* Svetli tekst */
            --muted-text: #BBBBBB; /* Prigu≈°eni tekst */
            --border-light: rgba(212, 175, 55, 0.2);
            --glass-effect: rgba(212, 175, 55, 0.03);
            --box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.15), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
            --border-radius: 1rem;
            --border-radius-lg: 1.5rem;
            --spacing-xs: 0.5rem;
            --spacing-sm: 0.75rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
        }

        /* Modern Background Effect */
        body {
            background: var(--dark-bg);
            position: relative;
            min-height: 100vh;
            color: var(--light-text);
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }

        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            right: -50%;
            bottom: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, transparent 30%, var(--dark-bg) 70%), 
                        radial-gradient(circle at top left, var(--gold-bright), transparent 40%),
                        radial-gradient(circle at bottom right, var(--gold-dark), transparent 40%),
                        radial-gradient(circle at top right, var(--gold-medium), transparent 40%);
            background-size: 100% 100%, 50% 50%, 50% 50%, 50% 50%;
            background-position: center, top left, bottom right, top right;
            filter: blur(60px);
            opacity: 0.1;
            z-index: -2;
            transform: rotate(0deg);
            animation: backgroundAnimation 30s infinite alternate ease-in-out;
        }
        
        @keyframes backgroundAnimation {
            0% {
                transform: rotate(0deg) scale(1);
            }
            100% {
                transform: rotate(5deg) scale(1.1);
            }
        }

        .container {
            background: rgba(16, 16, 18, 0.3);
            border-radius: var(--border-radius-lg);
            margin: 2rem auto;
            padding: 2.5rem;
            width: 90%;
            max-width: 800px;
            box-shadow: var(--box-shadow);
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border-light);
            backdrop-filter: blur(10px);
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.03), transparent);
            pointer-events: none;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2.5rem;
            background: rgba(16, 16, 18, 0.7);
            backdrop-filter: blur(16px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
            margin: 0 1rem 1rem 1rem;
            border: 1px solid var(--border-light);
        }

        .header .brand {
            font-size: 1.6rem;
            font-weight: 800;
            display: flex;
            align-items: center;
            gap: 1.2rem;
            cursor: pointer;
        }

        .header .brand span {
            background: var(--gradient-gold);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Navigation Menu */
        .nav-menu {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .nav-link {
            color: var(--light-text);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: var(--border-radius);
            transition: all 0.3s ease;
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid var(--border-light);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-link:hover {
            background: var(--gradient-gold);
            color: var(--dark-bg);
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(212, 175, 55, 0.3);
        }

        .nav-link.active {
            background: var(--gradient-gold);
            color: var(--dark-bg);
        }

        h1, h2, h3 {
            color: var(--gold-bright);
            margin-bottom: var(--spacing-md);
        }

        .login-form, .admin-panel {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        label {
            font-weight: 500;
            color: var(--gold-pale);
        }

        input, select, textarea {
            width: 100%;
            padding: 0.9rem 1.2rem;
            border: 1px solid var(--border-light);
            border-radius: var(--border-radius);
            background: rgba(31, 41, 55, 0.4);
            color: var(--light-text);
            margin-bottom: 0.5rem;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--gold-bright);
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.25);
            background: rgba(31, 41, 55, 0.6);
        }

        button {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            background: var(--gradient-gold);
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--box-shadow);
            position: relative;
            overflow: hidden;
            z-index: 1;
            letter-spacing: 0.5px;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 25px rgba(0, 0, 0, 0.1);
        }

        button:active {
            transform: translateY(0);
        }

        .logo-preview {
            width: 100%;
            padding: 1rem;
            border: 1px dashed var(--gold-medium);
            border-radius: var(--border-radius);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .logo-preview img {
            max-width: 200px;
            max-height: 200px;
            object-fit: contain;
        }

        .success-message {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid #10b981;
            color: #10b981;
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: var(--spacing-md);
            display: none;
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            color: #ef4444;
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: var(--spacing-md);
            display: none;
        }

        .nav-link {
            padding: 0.5rem 1rem;
            color: var(--gold-pale);
            text-decoration: none;
            border-radius: var(--border-radius);
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            background: rgba(212, 175, 55, 0.1);
            color: var(--gold-bright);
        }

        #loginSection, #adminSection {
            transition: all 0.3s ease;
        }

        #adminSection {
            display: none;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="brand" onclick="window.location.href='preview-fixed.html'">
            <span>Golden Balance</span>
            <span style="font-size: 1rem; font-weight: normal; color: var(--gold-pale);">| Admin Panel</span>
        </div>
        <div class="nav-menu">
            <a href="preview-fixed.html" class="nav-link">
                <i class="fas fa-home"></i> Poƒçetna
            </a>
            <a href="profile.html" class="nav-link">
                <i class="fas fa-user"></i> Profil
            </a>
        </div>
    </header>

    <div class="container">
        <!-- Login Section -->
        <div id="loginSection">
            <h1>Admin Prijava</h1>
            <p>Unesite svoje pristupne podatke za pristup admin panelu.</p>
            
            <div class="error-message" id="loginError">
                Netaƒçan email ili lozinka. Poku≈°ajte ponovo.
            </div>
            
            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" placeholder="Unesite va≈° email" required>
                </div>
                
                <div class="form-group">
                    <label for="password">Lozinka</label>
                    <input type="password" id="password" name="password" placeholder="Unesite va≈°u lozinku" required autocomplete="off">
                </div>
                
                <button type="submit">Prijavi se</button>
            </form>
        </div>
        
        <!-- Admin Panel Section -->
        <div id="adminSection">
            <div class="admin-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-lg);">
                <h1>Admin Panel</h1>
                <button id="logoutBtn" style="background: var(--dark-accent); color: var(--gold-pale); border: 1px solid var(--gold-dark);">
                    <i class="fas fa-sign-out-alt"></i> Odjava
                </button>
            </div>
            
            <div class="success-message" id="saveSuccess">
                Logo je uspe≈°no saƒçuvan i biƒáe prikazan na svim stranicama.
            </div>
            
            <!-- Admin Navigation Tabs -->
            <div class="admin-tabs" style="display: flex; margin-bottom: var(--spacing-lg); border-bottom: 1px solid var(--border-light); padding-bottom: 1rem;">
                <button id="logoTabBtn" class="tab-button active" style="margin-right: 1rem; background: transparent; color: var(--gold-bright); border: none; font-weight: 600; padding: 0.5rem 1rem; cursor: pointer; border-bottom: 2px solid var(--gold-bright);">
                    <i class="fas fa-image"></i> Upravljanje Logotipom
                </button>
                <button id="dataTabBtn" class="tab-button" style="margin-right: 1rem; background: transparent; color: var(--muted-text); border: none; font-weight: 600; padding: 0.5rem 1rem; cursor: pointer;">
                    <i class="fas fa-database"></i> Pregled Podataka
                </button>
                <button id="notificationsTabBtn" class="tab-button" style="margin-right: 1rem; background: transparent; color: var(--muted-text); border: none; font-weight: 600; padding: 0.5rem 1rem; cursor: pointer;">
                    <i class="fas fa-bell"></i> Notifikacije
                </button>
                <button id="inquiriesTabBtn" class="tab-button" style="margin-right: 1rem; background: transparent; color: var(--muted-text); border: none; font-weight: 600; padding: 0.5rem 1rem; cursor: pointer;">
                    <i class="fas fa-envelope"></i> Upiti korisnika
                </button>
                <button id="consultationsTabBtn" class="tab-button" style="margin-right: 1rem; background: transparent; color: var(--muted-text); border: none; font-weight: 600; padding: 0.5rem 1rem; cursor: pointer;">
                    <i class="fas fa-calendar-check"></i> Konsultacije
                </button>
            </div>
            
            <!-- Logo Management Tab -->
            <div id="logoTab" class="admin-tab-content" style="display: block;">
                <h2>Upravljanje Logotipom</h2>
                <p>Ovde mo≈æete postaviti ili promeniti logo koji ƒáe biti prikazan na svim stranicama aplikacije.</p>
            
                <div class="logo-preview">
                    <h3>Trenutni Logo</h3>
                    <img id="currentLogo" src="https://i.imgur.com/yQGiMd5.png" alt="Trenutni logo">
                </div>
                
                <form class="admin-panel" id="logoForm">
                    <div class="form-group">
                        <label for="logoUrl">URL adresa loga</label>
                        <input type="url" id="logoUrl" placeholder="Unesite URL adresu loga (npr. https://example.com/logo.png)">
                        <small style="color: var(--muted-text);">* Unesite direktan link do slike (URL mora zavr≈°avati sa .png, .jpg, .jpeg ili .gif)</small>
                    </div>

                    <div class="form-group">
                        <label for="logoUpload">Ili uƒçitajte logo sa raƒçunara</label>
                        <input type="file" id="logoUpload" accept="image/*">
                        <small style="color: var(--muted-text);">* Maksimalna veliƒçina: 2MB. Preporuƒçene dimenzije: 200x200 piksela.</small>
                    </div>
                    
                    <div class="form-group">
                        <label>Pregled novog loga</label>
                        <div class="logo-preview">
                            <img id="logoPreview" src="" alt="Preview novog loga" style="display: none;">
                            <p id="noPreview" style="color: var(--muted-text);">Ovde ƒáe biti prikazan pregled novog loga.</p>
                        </div>
                    </div>
                    
                    <button type="submit" id="saveLogo">Saƒçuvaj Logo</button>
                    <button type="button" onclick="testLogo()" style="background: #dc3545; margin-left: 10px; padding: 10px 20px; border: none; border-radius: 5px; color: white; cursor: pointer;">
                        Test Logo
                    </button>
                </form>
            </div>
            
            <!-- Database View Tab -->
            <div id="dataTab" class="admin-tab-content" style="display: none;">
                <h2>Pregled Podataka</h2>
                <p>Ovde mo≈æete pregledati sve podatke koji su saƒçuvani u LocalStorage bazi podataka aplikacije.</p>
                
                <div class="form-group">
                    <button id="refreshDataBtn" style="margin-bottom: var(--spacing-md);">
                        <i class="fas fa-sync-alt"></i> Osve≈æi Podatke
                    </button>
                </div>
                
                <div class="data-container">
                    <div id="data-entries" style="margin-bottom: var(--spacing-lg);">
                        <!-- Ovde ƒáe biti prikazani podaci -->
                    </div>
                </div>
            </div>
            
            <!-- Inquiries Tab -->
            <div id="inquiriesTab" class="admin-tab-content" style="display: none;">
                <h2>Upiti korisnika</h2>
                <div class="inquiries-actions mb-3">
                    <button id="refreshInquiriesBtn" class="btn btn-secondary">
                        <i class="fas fa-sync-alt"></i> Osve≈æi listu
                    </button>
                    <div class="inquiries-filter">
                        <select id="inquiriesFilter" class="form-control">
                            <option value="all">Svi upiti</option>
                            <option value="new">Novi</option>
                            <option value="in_progress">U obradi</option>
                            <option value="resolved">Re≈°eni</option>
                        </select>
                    </div>
                </div>
                <div class="inquiries-list">
                    <div class="table-responsive">
                        <table class="inquiries-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Datum</th>
                                    <th>Pitanje</th>
                                    <th>Email</th>
                                    <th>Telefon</th>
                                    <th>Status</th>
                                    <th>Akcije</th>
                                </tr>
                            </thead>
                            <tbody id="inquiriesList">
                                <!-- Upiti ƒáe biti uƒçitani ovde -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Notifications Tab -->
            <div id="notificationsTab" class="admin-tab-content" style="display: none;">
                <h2>Upravljanje Notifikacijama</h2>
                <p>Ovde mo≈æete kreirati i slati notifikacije korisnicima. Ove notifikacije ƒáe biti prikazane u njihovom notifikacionom centru.</p>
                
                <div style="display: flex; justify-content: space-between; margin-bottom: var(--spacing-lg);">
                    <button id="refreshNotificationsBtn">
                        <i class="fas fa-sync-alt"></i> Osve≈æi notifikacije
                    </button>
                    <button id="newNotificationBtn">
                        <i class="fas fa-plus"></i> Nova notifikacija
                    </button>
                </div>
                
                <div id="notificationForm" style="display: block; margin-bottom: var(--spacing-lg); padding: 1.5rem; border: 1px solid var(--border-light); border-radius: var(--border-radius); background: rgba(31, 41, 55, 0.2);">
                    <h3>Nova notifikacija</h3>
                    <form id="createNotificationForm">
                        <div class="form-group">
                            <label for="notificationTitle">Naslov notifikacije</label>
                            <input type="text" id="notificationTitle" name="notificationTitle" placeholder="Unesite naslov notifikacije" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="notificationMessage">Poruka notifikacije</label>
                            <textarea id="notificationMessage" name="notificationMessage" placeholder="Unesite poruku notifikacije" rows="4" required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="notificationType">Tip notifikacije</label>
                            <select id="notificationType" name="notificationType">
                                <option value="Obave≈°tenje">Obave≈°tenje</option>
                                <option value="Va≈æno">Va≈æno</option>
                                <option value="Upozorenje">Upozorenje</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="notificationRecipients">Primaoci</label>
                            <select id="notificationRecipients" name="notificationRecipients">
                                <option value="Svi korisnici">Svi korisnici</option>
                                <option value="Pojedinaƒçni korisnik">Pojedinaƒçni korisnik</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="userEmailGroup" style="display: none;">
                            <label for="userEmail">Email korisnika</label>
                            <input type="email" id="userEmail" name="userEmail" placeholder="Unesite email korisnika">
                        </div>
                        
                        <button type="submit">Po≈°alji notifikaciju</button>
                    </form>
                </div>
                
                <div id="notificationsList">
                    <h3>Prethodne notifikacije</h3>
                    <div class="table-responsive">
                        <table class="notifications-table" style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 1px solid var(--border-light); text-align: left;">
                                    <th style="padding: 0.75rem;">Datum</th>
                                    <th style="padding: 0.75rem;">Naslov</th>
                                    <th style="padding: 0.75rem;">Poruka</th>
                                    <th style="padding: 0.75rem;">Tip</th>
                                    <th style="padding: 0.75rem;">Primaoci</th>
                                    <th style="padding: 0.75rem;">Akcije</th>
                                </tr>
                            </thead>
                            <tbody id="notificationsTableBody">
                                <!-- Ovde ƒáe biti prikazane notifikacije -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Consultations Tab -->
            <div id="consultationsTab" class="admin-tab-content" style="display: none;">
                <h2>Konsultacije na ƒçekanju</h2>
                <p>Ovde mo≈æete pregledati zahteve za konsultacije koji ƒçekaju na odobrenje.</p>
                
                <div style="display: flex; justify-content: flex-start; margin-bottom: var(--spacing-lg);">
                    <button id="refreshConsultationsBtn">
                        <i class="fas fa-sync-alt"></i> Osve≈æi konsultacije
                    </button>
                </div>
                
                <div id="consultationsList">
                    <h3>Zahtevi za konsultacije</h3>
                    <div class="table-responsive">
                        <table class="consultations-table" style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="background: var(--dark-accent); color: var(--gold-bright);">
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 1px solid var(--border-light);">Datum i vreme</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 1px solid var(--border-light);">Klijent</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 1px solid var(--border-light);">Kontakt</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 1px solid var(--border-light);">Tip</th>
                                    <th style="padding: 0.75rem; text-align: left; border-bottom: 1px solid var(--border-light);">Akcije</th>
                                </tr>
                            </thead>
                            <tbody id="consultationsTableBody">
                                <!-- Ovde ƒáe biti prikazane konsultacije na ƒçekanju -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Admin kredencijali
        const ADMIN_EMAIL = 'zorandostica2@gmail.com';
        const ADMIN_PASSWORD = 'admin123'; // Privremena hardkodirana lozinka za lak≈°i pristup
        
        // DOM elementi
        const loginSection = document.getElementById('loginSection');
        const adminSection = document.getElementById('adminSection');
        const loginForm = document.getElementById('loginForm');
        const loginError = document.getElementById('loginError');
        const logoForm = document.getElementById('logoForm');
        const logoUrl = document.getElementById('logoUrl');
        const logoUpload = document.getElementById('logoUpload');
        const logoPreview = document.getElementById('logoPreview');
        const noPreview = document.getElementById('noPreview');
        const currentLogo = document.getElementById('currentLogo');
        const saveSuccess = document.getElementById('saveSuccess');
        const logoutBtn = document.getElementById('logoutBtn');
        
        // Provera da li je korisnik veƒá prijavljen
        function checkLoginStatus() {
            const isLoggedIn = localStorage.getItem('admin_logged_in');
            if (isLoggedIn === 'true') {
                loginSection.style.display = 'none';
                adminSection.style.display = 'block';
            }
        }
        
        // TEST funkcija za logo
        function testLogo() {
            const testLogoUrl = 'https://via.placeholder.com/100x100/FFD700/000000?text=TEST';
            localStorage.setItem('site_logo', testLogoUrl);
            
            // A≈æuriraj trenutni logo
            currentLogo.src = testLogoUrl;
            
            alert('Test logo je postavljen! Otvorite preview-fixed.html da vidite da li radi.');
        }
        
        // Uƒçitavanje saƒçuvanog loga - JEDNOSTAVNO
        function loadSavedLogo() {
            const savedLogo = localStorage.getItem('site_logo');
            if (savedLogo) {
                currentLogo.src = savedLogo;
            }
        }
        
        // Prijava admina - koristi hardkodiranu lozinku za lak≈°i pristup
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            // Jednostavna provera sa hardkodiranim kredencijalima
            if (email === ADMIN_EMAIL && password === ADMIN_PASSWORD) {
                localStorage.setItem('admin_logged_in', 'true');
                loginSection.style.display = 'none';
                adminSection.style.display = 'block';
                loginError.style.display = 'none';
            } else {
                loginError.style.display = 'block';
                loginError.textContent = 'Netaƒçan email ili lozinka. Koristite admin123 kao privremenu lozinku.';
            }
        });
        
        // Odjava admina
        logoutBtn.addEventListener('click', function() {
            localStorage.removeItem('admin_logged_in');
            loginSection.style.display = 'block';
            adminSection.style.display = 'none';
        });
        
        // Pregled loga iz URL-a - BEZ STRIKTNE VALIDACIJE
        logoUrl.addEventListener('input', function() {
            const url = this.value.trim();
            if (url) {
                // Poku≈°aj da prika≈æe≈° bilo koji URL
                logoPreview.src = url;
                logoPreview.style.display = 'block';
                noPreview.style.display = 'none';
                console.log('URL logo preview postavljen:', url);
            } else {
                logoPreview.style.display = 'none';
                noPreview.style.display = 'block';
            }
        });
        
        // Pregled uƒçitanog loga sa optimizacijom
        logoUpload.addEventListener('change', function() {
            const file = this.files[0];
            if (file) {
                // Proveri veliƒçinu fajla
                if (file.size > 5 * 1024 * 1024) { // 5MB limit
                    alert('Slika je prevelika. Maksimalna veliƒçina je 5MB.');
                    return;
                }
                
                // Funkcija za optimizaciju slike
                function optimizeImage(file, callback) {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    const img = new Image();
                    
                    img.onload = function() {
                        // Ograniƒçi dimenzije na maksimalno 300x300 piksela
                        const maxSize = 300;
                        let width = img.width;
                        let height = img.height;
                        
                        if (width > height) {
                            if (width > maxSize) {
                                height = (height * maxSize) / width;
                                width = maxSize;
                            }
                        } else {
                            if (height > maxSize) {
                                width = (width * maxSize) / height;
                                height = maxSize;
                            }
                        }
                        
                        canvas.width = width;
                        canvas.height = height;
                        
                        // Nacrtaj optimizovanu sliku
                        ctx.drawImage(img, 0, 0, width, height);
                        
                        // Konvertuj u data URL sa kompresijom
                        const optimizedDataUrl = canvas.toDataURL('image/jpeg', 0.8);
                        console.log('üîß Slika optimizovana:', {
                            originalSize: file.size,
                            optimizedSize: optimizedDataUrl.length,
                            compression: `${Math.round((1 - optimizedDataUrl.length / file.size) * 100)}%`
                        });
                        
                        callback(optimizedDataUrl);
                    };
                    
                    img.onerror = function() {
                        console.error('‚ùå Gre≈°ka pri uƒçitavanju slike za optimizaciju');
                        // Fallback na originalnu sliku
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            callback(e.target.result);
                        };
                        reader.readAsDataURL(file);
                    };
                    
                    // Uƒçitaj sliku
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                }
                
                // Optimizuj sliku pre prikaza
                optimizeImage(file, function(optimizedDataUrl) {
                    logoPreview.src = optimizedDataUrl;
                    logoPreview.style.display = 'block';
                    noPreview.style.display = 'none';
                    // Praznimo URL polje jer koristimo uƒçitanu sliku
                    logoUrl.value = '';
                    console.log('‚úÖ Logo optimizovan i prikazan u preview-u');
                });
            }
        });
        
        // Tab kontrola
        const logoTabBtn = document.getElementById('logoTabBtn');
        const dataTabBtn = document.getElementById('dataTabBtn');
        const notificationsTabBtn = document.getElementById('notificationsTabBtn');
        const inquiriesTabBtn = document.getElementById('inquiriesTabBtn');
        const logoTab = document.getElementById('logoTab');
        const dataTab = document.getElementById('dataTab');
        const notificationsTab = document.getElementById('notificationsTab');
        const inquiriesTab = document.getElementById('inquiriesTab');
        const refreshDataBtn = document.getElementById('refreshDataBtn');
        const dataEntries = document.getElementById('data-entries');
        const refreshInquiriesBtn = document.getElementById('refreshInquiriesBtn');
        const inquiriesList = document.getElementById('inquiriesList');
        
        // Prebacivanje izmeƒëu tabova
        logoTabBtn.addEventListener('click', function() {
            logoTab.style.display = 'block';
            dataTab.style.display = 'none';
            notificationsTab.style.display = 'none';
            inquiriesTab.style.display = 'none';
            
            logoTabBtn.classList.add('active');
            logoTabBtn.style.color = 'var(--gold-bright)';
            logoTabBtn.style.borderBottom = '2px solid var(--gold-bright)';
            
            dataTabBtn.classList.remove('active');
            dataTabBtn.style.color = 'var(--muted-text)';
            dataTabBtn.style.borderBottom = 'none';
            
            notificationsTabBtn.classList.remove('active');
            notificationsTabBtn.style.color = 'var(--muted-text)';
            notificationsTabBtn.style.borderBottom = 'none';
            
            inquiriesTabBtn.classList.remove('active');
            inquiriesTabBtn.style.color = 'var(--muted-text)';
            inquiriesTabBtn.style.borderBottom = 'none';
        });
        
        dataTabBtn.addEventListener('click', function() {
            dataTab.style.display = 'block';
            logoTab.style.display = 'none';
            notificationsTab.style.display = 'none';
            inquiriesTab.style.display = 'none';
            
            dataTabBtn.classList.add('active');
            dataTabBtn.style.color = 'var(--gold-bright)';
            dataTabBtn.style.borderBottom = '2px solid var(--gold-bright)';
            
            logoTabBtn.classList.remove('active');
            logoTabBtn.style.color = 'var(--muted-text)';
            logoTabBtn.style.borderBottom = 'none';
            
            notificationsTabBtn.classList.remove('active');
            notificationsTabBtn.style.color = 'var(--muted-text)';
            notificationsTabBtn.style.borderBottom = 'none';
            
            inquiriesTabBtn.classList.remove('active');
            inquiriesTabBtn.style.color = 'var(--muted-text)';
            inquiriesTabBtn.style.borderBottom = 'none';
            
            // Prikaz podataka prilikom prebacivanja na tab
            loadLocalStorageData();
        });
        
        inquiriesTabBtn.addEventListener('click', function() {
            inquiriesTab.style.display = 'block';
            logoTab.style.display = 'none';
            dataTab.style.display = 'none';
            notificationsTab.style.display = 'none';
            
            inquiriesTabBtn.classList.add('active');
            inquiriesTabBtn.style.color = 'var(--gold-bright)';
            inquiriesTabBtn.style.borderBottom = '2px solid var(--gold-bright)';
            
            logoTabBtn.classList.remove('active');
            logoTabBtn.style.color = 'var(--muted-text)';
            logoTabBtn.style.borderBottom = 'none';
            
            dataTabBtn.classList.remove('active');
            dataTabBtn.style.color = 'var(--muted-text)';
            dataTabBtn.style.borderBottom = 'none';
            
            notificationsTabBtn.classList.remove('active');
            notificationsTabBtn.style.color = 'var(--muted-text)';
            notificationsTabBtn.style.borderBottom = 'none';
            
            dataTabBtn.classList.remove('active');
            dataTabBtn.style.color = 'var(--muted-text)';
            dataTabBtn.style.borderBottom = 'none';
            
            // Prikaz upita prilikom prebacivanja na tab
            loadInquiries();
        });
        
        // Event listener za tab notifikacija
        notificationsTabBtn.addEventListener('click', function() {
            notificationsTab.style.display = 'block';
            logoTab.style.display = 'none';
            dataTab.style.display = 'none';
            inquiriesTab.style.display = 'none';
            
            notificationsTabBtn.classList.add('active');
            notificationsTabBtn.style.color = 'var(--gold-bright)';
            notificationsTabBtn.style.borderBottom = '2px solid var(--gold-bright)';
            
            logoTabBtn.classList.remove('active');
            logoTabBtn.style.color = 'var(--muted-text)';
            logoTabBtn.style.borderBottom = 'none';
            
            dataTabBtn.classList.remove('active');
            dataTabBtn.style.color = 'var(--muted-text)';
            dataTabBtn.style.borderBottom = 'none';
            
            inquiriesTabBtn.classList.remove('active');
            inquiriesTabBtn.style.color = 'var(--muted-text)';
            inquiriesTabBtn.style.borderBottom = 'none';
            
            // Uƒçitavanje notifikacija prilikom prebacivanja na tab
            loadNotifications();
        });
        
        // Funkcija za uƒçitavanje i formatiranje podataka iz localStorage
        function loadLocalStorageData() {
            dataEntries.innerHTML = '';
            
            if (localStorage.length === 0) {
                dataEntries.innerHTML = `
                    <div style="padding: 1rem; background: var(--dark-accent); border-radius: var(--border-radius); margin-bottom: 1rem;">
                        <p style="color: var(--muted-text);">Nema podataka u bazi.</p>
                    </div>
                `;
                return;
            }
            
            // Kreiranje HTML tabele za prikaz podataka
            let html = `
                <div style="overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse; margin-bottom: 2rem;">
                    <thead>
                        <tr style="background: var(--dark-accent); color: var(--gold-bright);">
                            <th style="padding: 1rem; text-align: left; border-bottom: 1px solid var(--border-light);">Kljuƒç</th>
                            <th style="padding: 1rem; text-align: left; border-bottom: 1px solid var(--border-light);">Vrednost</th>
                            <th style="padding: 1rem; text-align: left; border-bottom: 1px solid var(--border-light);">Akcije</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            // Prolazak kroz sve stavke u localStorage
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                let value = localStorage.getItem(key);
                
                try {
                    // Poku≈°aj parsiranja JSON vrednosti za lep≈°i prikaz
                    const parsedValue = JSON.parse(value);
                    value = JSON.stringify(parsedValue, null, 2);
                } catch (e) {
                    // Nije JSON, ostavi kao string
                }
                
                // Skraƒáivanje prikaza dugih vrednosti
                const displayValue = value.length > 100 ? value.substring(0, 100) + '...' : value;
                
                // Posebno formatiranje za slike
                let valueDisplay = displayValue;
                if (key === 'site_logo' || (value.startsWith('data:image') || value.match(/\.(jpeg|jpg|gif|png)$/i))) {
                    valueDisplay = `<img src="${value}" style="max-height: 50px; max-width: 100px;" />\n(Slika)`;
                }
                
                html += `
                    <tr style="border-bottom: 1px solid var(--border-light);">
                        <td style="padding: 1rem; vertical-align: top;">${key}</td>
                        <td style="padding: 1rem; vertical-align: top; font-family: monospace; font-size: 0.9rem; white-space: pre-wrap;">${valueDisplay}</td>
                        <td style="padding: 1rem; vertical-align: top;">
                            <button class="view-data-btn" data-key="${key}" style="background: transparent; color: var(--gold-pale); border: 1px solid var(--gold-dark); padding: 0.3rem 0.6rem; margin-right: 0.5rem; font-size: 0.8rem;">
                                <i class="fas fa-eye"></i> Pregledaj
                            </button>
                            <button class="delete-data-btn" data-key="${key}" style="background: transparent; color: #ef4444; border: 1px solid #ef4444; padding: 0.3rem 0.6rem; font-size: 0.8rem;">
                                <i class="fas fa-trash-alt"></i> Izbri≈°i
                            </button>
                        </td>
                    </tr>
                `;
            }
            
            html += `
                    </tbody>
                </table>
                </div>
            `;
            
            dataEntries.innerHTML = html;
            
            // Dodavanje event listenera za dugmad
            document.querySelectorAll('.view-data-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const key = this.getAttribute('data-key');
                    const value = localStorage.getItem(key);
                    
                    let formattedValue = value;
                    try {
                        const parsedValue = JSON.parse(value);
                        formattedValue = JSON.stringify(parsedValue, null, 2);
                    } catch (e) {}
                    
                    // Prikaz modalnog prozora sa detaljima
                    alert(`Kljuƒç: ${key}\n\nVrednost:\n${formattedValue}`);
                });
            });
            
            document.querySelectorAll('.delete-data-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const key = this.getAttribute('data-key');
                    if (confirm(`Da li ste sigurni da ≈æelite obrisati podatke sa kljuƒçem "${key}"?`)) {
                        localStorage.removeItem(key);
                        loadLocalStorageData(); // Ponovno uƒçitavanje podataka
                    }
                });
            });
        }
        
        // Dugme za osve≈æavanje podataka
        refreshDataBtn.addEventListener('click', loadLocalStorageData);
        
        // ƒåuvanje loga - JEDNOSTAVNO BEZ VALIDACIJE
        logoForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            let logoSource = '';
            
            // Prioritet: uƒçitana slika, zatim URL - BEZ striktne validacije
            if (logoPreview.style.display === 'block' && logoPreview.src) {
                logoSource = logoPreview.src;
                console.log('üíæ ƒåuvam logo iz preview-a:', logoSource.substring(0, 100) + '...');
                console.log('Logo type:', logoSource.startsWith('data:') ? 'data URL' : 'regular URL');
                console.log('Logo size:', logoSource.length, 'karaktera');
            } else if (logoUrl.value.trim()) {
                logoSource = logoUrl.value.trim();
                console.log('üíæ ƒåuvam logo direktno iz URL-a:', logoSource);
            }
            
            if (logoSource) {
                try {
                    // Saƒçuvaj u localStorage
                    localStorage.setItem('site_logo', logoSource);
                    console.log('‚úÖ Logo saƒçuvan u localStorage');
                    
                    // Verifikuj da li je stvarno saƒçuvan
                    const verificirajLogo = localStorage.getItem('site_logo');
                    if (verificirajLogo) {
                        console.log('‚úÖ Verifikacija: Logo uspe≈°no saƒçuvan');
                        console.log('Saƒçuvani logo length:', verificirajLogo.length);
                    } else {
                        console.error('‚ùå Verifikacija: Logo nije saƒçuvan!');
                    }
                    
                    // A≈æuriraj prikaz
                    currentLogo.src = logoSource;
                    
                    // Trigeruj storage event za sinhronizaciju
                    window.dispatchEvent(new StorageEvent('storage', {
                        key: 'site_logo',
                        newValue: logoSource,
                        url: window.location.href
                    }));
                    console.log('üì° Storage event poslat za sinhronizaciju');
                    
                    // Prika≈æi poruku
                    saveSuccess.style.display = 'block';
                    setTimeout(() => {
                        saveSuccess.style.display = 'none';
                    }, 3000);
                    
                    // Oƒçisti formu
                    logoUrl.value = '';
                } catch (error) {
                    console.error('‚ùå Gre≈°ka pri ƒçuvanju loga:', error);
                    alert('Gre≈°ka pri ƒçuvanju loga. Poku≈°ajte sa manjom slikom.');
                }
                logoUpload.value = '';
                logoPreview.style.display = 'none';
                noPreview.style.display = 'block';
                
                alert('Logo je uspe≈°no saƒçuvan!\n\nURL: ' + logoSource.substring(0, 60) + '...');
            } else {
                alert('Molimo postavite logo pre ƒçuvanja.');
            }
        });
        
        // Provera validnosti URL-a slike
        function isValidImageUrl(url) {
            return url.match(/\.(jpeg|jpg|gif|png)$/i) != null;
        }
        
        // Funkcija za uƒçitavanje upita korisnika
        function loadInquiries() {
            const inquiries = JSON.parse(localStorage.getItem('unansweredQuestions') || '[]');
            const filter = document.getElementById('inquiriesFilter').value;
            const tbody = document.getElementById('inquiriesList');
            
            // Filtriraj upite prema izabranom filteru
            let filteredInquiries = [...inquiries];
            if (filter !== 'all') {
                filteredInquiries = inquiries.filter(inquiry => inquiry.status === filter);
            }
            
            // Sortiraj po datumu (najnovije prvo)
            filteredInquiries.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            // Generi≈°i redove tabele
            tbody.innerHTML = filteredInquiries.length > 0 ? '' : '<tr><td colspan="7" class="text-center">Nema upita za prikaz</td></tr>';
            
            filteredInquiries.forEach(inquiry => {
                const tr = document.createElement('tr');
                tr.dataset.id = inquiry.id;
                tr.innerHTML = `
                    <td>#${inquiry.id.toString().slice(-6)}</td>
                    <td>${new Date(inquiry.timestamp).toLocaleString()}</td>
                    <td>${inquiry.question}</td>
                    <td>${inquiry.email}</td>
                    <td>${inquiry.phone || 'Nije naveden'}</td>
                    <td>
                        <select class="status-select" data-id="${inquiry.id}">
                            <option value="new" ${inquiry.status === 'new' ? 'selected' : ''}>Nov</option>
                            <option value="in_progress" ${inquiry.status === 'in_progress' ? 'selected' : ''}>U obradi</option>
                            <option value="resolved" ${inquiry.status === 'resolved' ? 'selected' : ''}>Re≈°en</option>
                        </select>
                    </td>
                    <td>
                        <button class="btn btn-sm btn-primary contact-btn" data-email="${inquiry.email}" data-phone="${inquiry.phone}">
                            <i class="fas fa-envelope"></i>
                        </button>
                        <button class="btn btn-sm btn-danger delete-btn" data-id="${inquiry.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            
            // Dodaj event listenere za promenu statusa
            document.querySelectorAll('.status-select').forEach(select => {
                select.addEventListener('change', function() {
                    const id = parseInt(this.dataset.id);
                    const newStatus = this.value;
                    updateInquiryStatus(id, newStatus);
                });
            });
            
            // Dodaj event listenere za dugmad za kontakt
            document.querySelectorAll('.contact-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const email = this.dataset.email;
                    const phone = this.dataset.phone;
                    let contactInfo = `Email: ${email}`;
                    if (phone && phone !== 'Nije naveden') {
                        contactInfo += `\nTelefon: ${phone}`;
                    }
                    alert(`Kontakt informacije:\n${contactInfo}`);
                });
            });
            
            // Dodaj event listenere za dugmad za brisanje
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (confirm('Da li ste sigurni da ≈æelite da obri≈°ete ovaj upit?')) {
                        const id = parseInt(this.dataset.id);
                        deleteInquiry(id);
                    }
                });
            });
        }
        
        // Funkcija za a≈æuriranje statusa upita
        function updateInquiryStatus(id, newStatus) {
            const inquiries = JSON.parse(localStorage.getItem('unansweredQuestions') || '[]');
            const index = inquiries.findIndex(inq => inq.id === id);
            
            if (index !== -1) {
                inquiries[index].status = newStatus;
                localStorage.setItem('unansweredQuestions', JSON.stringify(inquiries));
                
                // A≈æuriraj prikaz
                if (document.querySelector('.tab-content#inquiriesTab').style.display === 'block') {
                    loadInquiries();
                }
            }
        }
        
        // Funkcija za brisanje upita
        function deleteInquiry(id) {
            let inquiries = JSON.parse(localStorage.getItem('unansweredQuestions') || '[]');
            inquiries = inquiries.filter(inq => inq.id !== id);
            localStorage.setItem('unansweredQuestions', JSON.stringify(inquiries));
            
            // A≈æuriraj prikaz
            if (document.querySelector('.tab-content#inquiriesTab').style.display === 'block') {
                loadInquiries();
            }
        }
        
        // Inicijalizacija
        document.addEventListener('DOMContentLoaded', function() {
            checkLoginStatus();
            loadSavedLogo();
            loadLocalStorageData();
            
            // Dodaj event listener za dugme za osve≈æavanje upita
            document.getElementById('refreshInquiriesBtn')?.addEventListener('click', loadInquiries);
            
            // Dodaj event listener za filter upita
            document.getElementById('inquiriesFilter')?.addEventListener('change', loadInquiries);
            
            // Inicijalizacija notifikacionih funkcija
            initNotifications();
        });
        
        // Inicijalizacija notifikacionih funkcionalnosti
        function initNotifications() {
            // Dodavanje event listenera za notifikacione elemente
            const refreshNotificationsBtn = document.getElementById('refreshNotificationsBtn');
            const newNotificationBtn = document.getElementById('newNotificationBtn');
            const notificationForm = document.getElementById('notificationForm');
            const createNotificationForm = document.getElementById('createNotificationForm');
            const notificationRecipients = document.getElementById('notificationRecipients');
            const userEmailGroup = document.getElementById('userEmailGroup');
            
            // Event listener za dugme za osve≈æavanje notifikacija
            if (refreshNotificationsBtn) {
                refreshNotificationsBtn.addEventListener('click', loadNotifications);
            }
            
            // Event listener za promenu tipa primaoca
            if (notificationRecipients) {
                notificationRecipients.addEventListener('change', function() {
                    if (this.value === 'Pojedinaƒçni korisnik') {
                        userEmailGroup.style.display = 'block';
                    } else {
                        userEmailGroup.style.display = 'none';
                    }
                });
            }
            
            // Event listener za slanje notifikacije
            if (createNotificationForm) {
                createNotificationForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const title = document.getElementById('notificationTitle').value;
                    const message = document.getElementById('notificationMessage').value;
                    const type = document.getElementById('notificationType').value;
                    const recipients = document.getElementById('notificationRecipients').value;
                    const userEmail = document.getElementById('userEmail').value;
                    
                    if (recipients === 'Pojedinaƒçni korisnik' && !userEmail) {
                        alert('Unesite email korisnika kojem ≈°aljete notifikaciju.');
                        return;
                    }
                    
                    sendNotification({
                        title: title,
                        message: message,
                        type: type,
                        recipients: recipients,
                        userEmail: recipients === 'Pojedinaƒçni korisnik' ? userEmail : null,
                        date: new Date().toISOString(),
                        status: 'Poslato'
                    });
                    
                    // Resetovanje forme nakon uspe≈°nog slanja
                    createNotificationForm.reset();
                    userEmailGroup.style.display = 'none';
                    
                    // Osve≈æavanje liste notifikacija
                    loadNotifications();
                });
            }
        }
        
        // Funkcija za slanje notifikacije
        function sendNotification(notification) {
            // Validacija obaveznih polja
            if (!notification.title || !notification.message) {
                alert('Naslov i poruka notifikacije su obavezni.');
                return false;
            }
            
            // Dobavljanje postojeƒáih notifikacija iz localStorage
            const notifications = JSON.parse(localStorage.getItem('adminNotifications') || '[]');
            
            // Kreiranje nove notifikacije
            const newNotification = {
                id: 'notif_' + Date.now(),
                title: notification.title,
                message: notification.message,
                type: notification.type || 'Obave≈°tenje',
                recipients: notification.recipients || 'Svi korisnici',
                userEmail: notification.userEmail || null,
                date: notification.date || new Date().toISOString(),
                status: notification.status || 'Poslato',
                read: false
            };
            
            // Dodavanje nove notifikacije u lokalnu bazu
            notifications.unshift(newNotification); // Dodavanje na poƒçetak niza
            localStorage.setItem('adminNotifications', JSON.stringify(notifications));
            
            // Dodavanje notifikacije u korisniƒçki localStorage (simulacija)
            if (newNotification.recipients === 'Svi korisnici') {
                // Simulacija slanja svim korisnicima KOJI SU ADMINI
                // U produkciji bi se ovo filtriralo na serveru, ali ovde simuliramo
                // da samo admin dobija ove notifikacije, a ne obiƒçni korisnici
                const adminEmail = 'zorandostica2@gmail.com';
                const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
                const isAdmin = currentUser.email === adminEmail || localStorage.getItem('admin_logged_in') === 'true';
                
                if (isAdmin) {
                    const userNotifications = JSON.parse(localStorage.getItem('userNotifications') || '[]');
                    userNotifications.unshift({
                        id: 'user_' + Date.now(),
                        title: newNotification.title,
                        message: newNotification.message,
                        type: newNotification.type,
                        timestamp: new Date().toISOString(),
                        read: false,
                        forAdmin: true // Oznaƒçavamo da je notifikacija za admina
                    });
                    localStorage.setItem('userNotifications', JSON.stringify(userNotifications));
                }
            } else if (newNotification.recipients === 'Pojedinaƒçni korisnik' && newNotification.userEmail) {
                // Simulacija slanja pojedinaƒçnom korisniku
                const userNotifications = JSON.parse(localStorage.getItem('userNotifications') || '[]');
                
                // Provera duplikata - spreƒçavamo slanje istih notifikacija o konsultaciji
                const isDuplicate = userNotifications.some(notif => 
                    notif.title === newNotification.title && 
                    notif.userEmail === newNotification.userEmail &&
                    notif.message.includes('LINK ZA PRISTUP ONLINE SASTANKU') &&
                    newNotification.message.includes('LINK ZA PRISTUP ONLINE SASTANKU')
                );
                
                if (isDuplicate) {
                    console.log('‚ö†Ô∏è Duplikat notifikacije spreƒçen:', newNotification.title);
                    return false;
                }
                
                // Dodavanje notifikacije u userNotifications - ovo ide klijentu
                // Provera da li poruka sadr≈æi Zoom link
                let messageToShow = newNotification.message;
                
                // Posebno formatiranje ako imamo online sastanak sa linkom - KREIRANJE KLIKABILNOG LINKA
                if (messageToShow.includes('LINK ZA PRISTUP ONLINE SASTANKU')) {
                    // Pronala≈æenje Zoom linkova i pretvaranje u klikabilne linkove
                    messageToShow = messageToShow.replace(
                        /(https:\/\/[^\s\n]+)/g, 
                        '<a href="$1" target="_blank" style="color: #007bff; text-decoration: underline; font-weight: bold; display: inline-block; margin: 5px 0;">üìû Pristupite Zoom sastanku</a>'
                    );
                }
                
                userNotifications.unshift({
                    id: 'user_' + Date.now(),
                    title: newNotification.title,
                    message: messageToShow,
                    type: newNotification.type,
                    timestamp: new Date().toISOString(),
                    read: false,
                    hasZoomLink: messageToShow.includes('LINK ZA PRISTUP ONLINE SASTANKU'),
                    userEmail: newNotification.userEmail // Dodajemo email korisnika da znamo kome pripada
                });
                localStorage.setItem('userNotifications', JSON.stringify(userNotifications));
                
                // Dodavanje kopije notifikacije u admin notifikacije ako je admin prijavljen
                const adminEmail = 'zorandostica2@gmail.com';
                const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
                const isAdmin = currentUser.email === adminEmail || localStorage.getItem('admin_logged_in') === 'true';
                
                if (isAdmin) {
                    // Ovo je samo kopija za admina da vidi ≈°ta je poslato
                    const adminUserNotifications = JSON.parse(localStorage.getItem('adminUserNotifications') || '[]');
                    adminUserNotifications.unshift({
                        id: 'admin_copy_' + Date.now(),
                        title: `Kopija: ${newNotification.title}`,
                        message: newNotification.message,
                        type: newNotification.type,
                        timestamp: new Date().toISOString(),
                        read: false,
                        sentTo: newNotification.userEmail
                    });
                    localStorage.setItem('adminUserNotifications', JSON.stringify(adminUserNotifications));
                }
                
                // U stvarnoj aplikaciji bi se ovde komuniciralo sa serverom
                console.log(`Notifikacija poslata korisniku: ${newNotification.userEmail}, sadr≈æaj: ${newNotification.message}`);
            }
            
            alert('Notifikacija je uspe≈°no poslata!');
            return true;
        }
        
        // Funkcija za uƒçitavanje notifikacija
        function loadNotifications() {
            const notificationsTableBody = document.getElementById('notificationsTableBody');
            if (!notificationsTableBody) return;
            
            // Dobavljanje notifikacija iz localStorage
            const notifications = JSON.parse(localStorage.getItem('adminNotifications') || '[]');
            
            // Prazna tabela ako nema notifikacija
            if (notifications.length === 0) {
                notificationsTableBody.innerHTML = `<tr><td colspan="6" style="text-align: center; padding: 1rem;">Nema notifikacija za prikaz</td></tr>`;
                return;
            }
            
            // Sortiranje notifikacija (najnovije prvo)
            notifications.sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // Generisanje HTML-a za svaku notifikaciju
            notificationsTableBody.innerHTML = '';
            notifications.forEach(notification => {
                const row = document.createElement('tr');
                row.style.borderBottom = '1px solid var(--border-light)';
                
                // Formatiranje datuma
                const date = new Date(notification.date);
                const formattedDate = `${date.getDate().toString().padStart(2, '0')}.${(date.getMonth() + 1).toString().padStart(2, '0')}.${date.getFullYear()} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;
                
                // Formatiranje poruke da ukljuƒçuje kliketabilan link
                let formattedMessage = notification.message || '';
                if (formattedMessage && formattedMessage.includes('https://us05web.zoom.us/')) {
                    // Izdvajamo Zoom link iz poruke
                    const linkMatch = formattedMessage.match(/(https:\/\/us05web\.zoom\.us\/[^\s]+)/);
                    if (linkMatch) {
                        const zoomLink = linkMatch[1];
                        formattedMessage = formattedMessage.replace(zoomLink, `<a href="${zoomLink}" target="_blank" style="color: var(--gold-bright); text-decoration: underline;">üìû Zoom link</a>`);
                    }
                }
                
                row.innerHTML = `
                    <td style="padding: 0.75rem;">${formattedDate}</td>
                    <td style="padding: 0.75rem;">${notification.title}</td>
                    <td style="padding: 0.75rem; max-width: 300px; word-wrap: break-word;">${formattedMessage}</td>
                    <td style="padding: 0.75rem;">${notification.type}</td>
                    <td style="padding: 0.75rem;">${notification.recipients === 'Pojedinaƒçni korisnik' ? notification.userEmail : 'Svi korisnici'}</td>
                    <td style="padding: 0.75rem;">
                        <button class="delete-notification-btn" data-id="${notification.id}" style="background: var(--dark-accent); color: var(--gold-pale); border: 1px solid var(--gold-dark); padding: 0.5rem; font-size: 0.9rem;">
                            <i class="fas fa-trash"></i> Obri≈°i
                        </button>
                    </td>
                `;
                
                notificationsTableBody.appendChild(row);
            });
            
            // Dodavanje event listenera za dugme za brisanje
            document.querySelectorAll('.delete-notification-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    deleteNotification(id);
                });
            });
        }
        
        // Funkcija za brisanje notifikacije
        function deleteNotification(id) {
            if (confirm('Da li ste sigurni da ≈æelite da obri≈°ete ovu notifikaciju?')) {
                const notifications = JSON.parse(localStorage.getItem('adminNotifications') || '[]');
                const updatedNotifications = notifications.filter(notification => notification.id !== id);
                localStorage.setItem('adminNotifications', JSON.stringify(updatedNotifications));
                
                // Osve≈æavanje prikaza notifikacija
                loadNotifications();
            }
        }
        
        // Inicijalizacija funkcionalnosti za konsultacije
        function initConsultations() {
            // Elementi konsultacija
            const consultationsTabBtn = document.getElementById('consultationsTabBtn');
            const consultationsTab = document.getElementById('consultationsTab');
            const refreshConsultationsBtn = document.getElementById('refreshConsultationsBtn');
            
            // Event listener za tab konsultacija
            if (consultationsTabBtn) {
                consultationsTabBtn.addEventListener('click', function() {
                    logoTab.style.display = 'none';
                    dataTab.style.display = 'none';
                    notificationsTab.style.display = 'none';
                    inquiriesTab.style.display = 'none';
                    consultationsTab.style.display = 'block';
                    
                    // Resetovanje stilova svih tabova
                    logoTabBtn.classList.remove('active');
                    logoTabBtn.style.color = 'var(--muted-text)';
                    logoTabBtn.style.borderBottom = 'none';
                    
                    dataTabBtn.classList.remove('active');
                    dataTabBtn.style.color = 'var(--muted-text)';
                    dataTabBtn.style.borderBottom = 'none';
                    
                    notificationsTabBtn.classList.remove('active');
                    notificationsTabBtn.style.color = 'var(--muted-text)';
                    notificationsTabBtn.style.borderBottom = 'none';
                    
                    inquiriesTabBtn.classList.remove('active');
                    inquiriesTabBtn.style.color = 'var(--muted-text)';
                    inquiriesTabBtn.style.borderBottom = 'none';
                    
                    // Aktivacija taba konsultacija
                    consultationsTabBtn.classList.add('active');
                    consultationsTabBtn.style.color = 'var(--gold-bright)';
                    consultationsTabBtn.style.borderBottom = '2px solid var(--gold-bright)';
                    
                    // Uƒçitavanje konsultacija
                    loadConsultations();
                });
            }
            
            // Event listener za dugme za osve≈æavanje konsultacija
            if (refreshConsultationsBtn) {
                refreshConsultationsBtn.addEventListener('click', loadConsultations);
            }
            
            // Pokretanje inicijalnog uƒçitavanja konsultacija
            loadConsultations();
        }
            
        
        // Event listener za kreiranje nove konsultacije
        // Uklonjen jer se konsultacije kreiru samo kroz formu na preview-fixed.html
        
        // Funkcija za ƒçuvanje konsultacije
        // Uklonjena jer se konsultacije kreiru samo kroz formu na preview-fixed.html        // Funkcija za uƒçitavanje konsultacija na ƒçekanju
        function loadConsultations() {
            const consultationsTableBody = document.getElementById('consultationsTableBody');
            if (!consultationsTableBody) return;
            
            // Dobavljanje konsultacija iz localStorage
            const consultations = JSON.parse(localStorage.getItem('consultations') || '[]');
            
            // Filtriranje samo konsultacija na ƒçekanju
            const pendingConsultations = consultations.filter(consult => consult.status === 'pending');
            
            // Sortiranje konsultacija (nadolazeƒáe prvo)
            pendingConsultations.sort((a, b) => {
                const dateA = new Date(`${a.date}T${a.time}`);
                const dateB = new Date(`${b.date}T${b.time}`);
                return dateA - dateB;
            });
            
            // Provera da li ima konsultacija za prikaz
            if (pendingConsultations.length === 0) {
                consultationsTableBody.innerHTML = `<tr><td colspan="5" style="text-align: center; padding: 1rem;">Nema zahteva za konsultacije</td></tr>`;
                return;
            }
            
            // Generisanje HTML-a za svaku konsultaciju na ƒçekanju
            consultationsTableBody.innerHTML = '';
            pendingConsultations.forEach(consultation => {
                // Formatiranje datuma i vremena
                const consultDate = new Date(`${consultation.date}T${consultation.time}`);
                const formattedDate = consultDate.toLocaleDateString('sr-RS');
                const formattedTime = consultDate.toLocaleTimeString('sr-RS', { hour: '2-digit', minute: '2-digit' });
                
                // Kreiranje reda tabele
                const row = document.createElement('tr');
                row.style.borderBottom = '1px solid var(--border-light)';
                
                row.innerHTML = `
                    <td style="padding: 0.75rem;">${formattedDate}<br>${formattedTime}</td>
                    <td style="padding: 0.75rem;">${consultation.client}</td>
                    <td style="padding: 0.75rem;">${consultation.email}<br>${consultation.phone}</td>
                    <td style="padding: 0.75rem;">
                        ${consultation.type}<br>
                        ${consultation.link ? `<a href="${consultation.link}" target="_blank" style="color: var(--gold-bright); text-decoration: none; font-size: 0.85em;">üìû Zoom link</a>` : ''}
                    </td>
                    <td style="padding: 0.75rem;">
                        <button class="approve-consultation-btn" data-id="${consultation.id}" style="background: var(--dark-accent); color: #10b981; border: 1px solid #10b981; padding: 0.5rem; margin-right: 0.3rem;">
                            <i class="fas fa-check"></i> Odobri
                        </button>
                        <button class="reject-consultation-btn" data-id="${consultation.id}" style="background: var(--dark-accent); color: #ef4444; border: 1px solid #ef4444; padding: 0.5rem; margin-right: 0.3rem;">
                            <i class="fas fa-times"></i> Odbij
                        </button>
                        <button class="delete-consultation-btn" data-id="${consultation.id}" style="background: var(--dark-accent); color: #ef4444; border: 1px solid #ef4444; padding: 0.5rem;" title="Obri≈°i zahtev">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                
                consultationsTableBody.appendChild(row);
            });
            
            // Dodavanje event listenera za dugme za odobravanje konsultacije
            document.querySelectorAll('.approve-consultation-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    updateConsultationApproval(id, 'approved');
                });
            });
            
            // Dodavanje event listenera za dugme za odbijanje konsultacije
            document.querySelectorAll('.reject-consultation-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    updateConsultationApproval(id, 'rejected');
                });
            });
            
            // Dodavanje event listenera za dugme za brisanje
            document.querySelectorAll('.delete-consultation-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    deleteConsultation(id);
                });
            });
        }
        
        // Funkcija za a≈æuriranje statusa konsultacije
        function updateConsultationStatus(id, newStatus) {
            // Dobavljanje konsultacija iz localStorage
            const consultations = JSON.parse(localStorage.getItem('consultations') || '[]');
            
            // Pronala≈æenje konsultacije sa odgovarajuƒáim ID-om
            const index = consultations.findIndex(consult => consult.id === id);
            
            // Ako je konsultacija pronaƒëena
            if (index !== -1) {
                // A≈æuriranje statusa
                consultations[index].status = newStatus;
                
                // ƒåuvanje a≈æuriranih konsultacija
                localStorage.setItem('consultations', JSON.stringify(consultations));
                
                // Osve≈æavanje prikaza
                loadConsultations();
                
                // Kreiranje notifikacije o promeni statusa
                const consultation = consultations[index];
                const formattedDate = new Date(`${consultation.date}T${consultation.time}`).toLocaleDateString('sr-RS');
                const formattedTime = new Date(`${consultation.date}T${consultation.time}`).toLocaleTimeString('sr-RS', { hour: '2-digit', minute: '2-digit' });
                
                let statusText = '';
                switch(newStatus) {
                    case 'pending':
                        statusText = 'na ƒçekanju';
                        break;
                    case 'approved':
                        statusText = 'odobrena';
                        break;
                    case 'rejected':
                        statusText = 'odbijena';
                        break;
                    case 'completed':
                        statusText = 'zavr≈°ena';
                        break;
                    case 'cancelled':
                        statusText = 'otkazana';
                        break;
                }
                
                // Slanje notifikacije samo adminu
                sendNotification({
                    title: `Status konsultacije a≈æuriran`,
                    message: `Konsultacija sa klijentom ${consultation.client} zakazana za ${formattedDate} u ${formattedTime} je sada ${statusText}.`,
                    type: 'Obave≈°tenje',
                    recipients: 'Pojedinaƒçni korisnik',
                    userEmail: ADMIN_EMAIL, // Samo admin dobija ovu notifikaciju
                    date: new Date().toISOString(),
                    status: 'Poslato'
                });
            }
        }
        
        // Funkcija za a≈æuriranje odobrenja konsultacije
        function updateConsultationApproval(id, approvalStatus) {
            // Dobavljanje konsultacija iz localStorage
            const consultations = JSON.parse(localStorage.getItem('consultations') || '[]');
            
            // Pronala≈æenje konsultacije sa odgovarajuƒáim ID-om
            const index = consultations.findIndex(consult => consult.id === id);
            
            // Ako je konsultacija pronaƒëena
            if (index !== -1) {
                // A≈æuriranje statusa odobrenja
                consultations[index].approval = approvalStatus;
                
                // A≈æuriranje statusa u skladu sa odobrenjem
                if (approvalStatus === 'approved') {
                    consultations[index].status = 'approved';
                } else if (approvalStatus === 'rejected') {
                    consultations[index].status = 'rejected';
                }
                
                // ƒåuvanje a≈æuriranih konsultacija
                localStorage.setItem('consultations', JSON.stringify(consultations));
                
                // Osve≈æavanje prikaza
                loadConsultations();
                
                // Kreiranje notifikacije o promeni statusa odobrenja
                const consultation = consultations[index];
                const formattedDate = new Date(`${consultation.date}T${consultation.time}`).toLocaleDateString('sr-RS');
                const formattedTime = new Date(`${consultation.date}T${consultation.time}`).toLocaleTimeString('sr-RS', { hour: '2-digit', minute: '2-digit' });
                
                let approvalText = approvalStatus === 'approved' ? 'odobrena' : 'odbijena';
                
                // Slanje notifikacije samo adminu
                sendNotification({
                    title: `Konsultacija ${approvalText}`,
                    message: `Konsultacija sa klijentom ${consultation.client} zakazana za ${formattedDate} u ${formattedTime} je ${approvalText}.`,
                    type: 'Obave≈°tenje',
                    recipients: 'Pojedinaƒçni korisnik',
                    userEmail: ADMIN_EMAIL, // Samo admin dobija ovu notifikaciju
                    date: new Date().toISOString(),
                    status: 'Poslato'
                });
                
                // Ako je konsultacija odobrena, automatski ≈°alji notifikaciju korisniku sa Zoom linkom
                if (approvalStatus === 'approved') {
                    // Proveri da li je korisnik veƒá obave≈°ten da ne ≈°aljemo duplikate
                    if (!consultation.notified) {
                        let clientMessage = `Po≈°tovani/a ${consultation.client},\n\nVa≈°a konsultacija je odobrena i zakazana za ${formattedDate} u ${formattedTime}.`;
                        
                        // Dodavanje Zoom linka u poruku - FORMATIRAN KAO KLIKABILAN LINK
                        if (consultation.link) {
                            clientMessage += `\n\nüéØ LINK ZA PRISTUP ONLINE SASTANKU:\n<a href="${consultation.link}" target="_blank" style="color: #007bff; text-decoration: underline; font-weight: bold;">${consultation.link}</a>\n\nMolimo vas saƒçuvajte ovaj link i pristupite mu u vreme zakazane konsultacije.`;
                        }
                        
                        // Slanje notifikacije korisniku
                        sendNotification({
                            title: 'Konsultacija odobrena ‚úÖ',
                            message: clientMessage,
                            type: 'Obave≈°tenje',
                            recipients: 'Pojedinaƒçni korisnik',
                            userEmail: consultation.email,
                            date: new Date().toISOString(),
                            status: 'Poslato'
                        });
                        
                        // Oznaƒçavanje da je korisnik obave≈°ten
                        consultations[index].notified = true;
                        localStorage.setItem('consultations', JSON.stringify(consultations));
                        
                        console.log(`‚úÖ Notifikacija poslata korisniku ${consultation.email} za konsultaciju ${consultation.id}`);
                    } else {
                        console.log(`‚ÑπÔ∏è Korisnik ${consultation.email} je veƒá obave≈°ten o konsultaciji ${consultation.id}`);
                    }
                }
            }
        }
        
        // Funkcija za obave≈°tavanje klijenta o potvrƒëenoj konsultaciji
        function notifyClient(id) {
            // Dobavljanje konsultacija iz localStorage
            const consultations = JSON.parse(localStorage.getItem('consultations') || '[]');
            
            // Pronala≈æenje konsultacije sa odgovarajuƒáim ID-om
            const index = consultations.findIndex(consult => consult.id === id);
            
            // Ako je konsultacija pronaƒëena
            if (index !== -1) {
                const consultation = consultations[index];
                
                // Provera da li je konsultacija odobrena
                if (consultation.approval !== 'approved') {
                    alert('Samo odobrene konsultacije mogu biti poslate klijentu!');
                    return;
                }
                
                // Provera da li je klijent veƒá obave≈°ten
                if (consultation.notified) {
                    alert('Klijent je veƒá obave≈°ten o ovoj konsultaciji!');
                    return;
                }
                
                // Oznaƒçavanje da je klijent obave≈°ten
                consultations[index].notified = true;
                
                // ƒåuvanje a≈æuriranih konsultacija
                localStorage.setItem('consultations', JSON.stringify(consultations));
                
                const formattedDate = new Date(`${consultation.date}T${consultation.time}`).toLocaleDateString('sr-RS');
                const formattedTime = new Date(`${consultation.date}T${consultation.time}`).toLocaleTimeString('sr-RS', { hour: '2-digit', minute: '2-digit' });
                
                // Priprema poruke za klijenta
                let message = `Po≈°tovani/a ${consultation.client},\n\nVa≈°a konsultacija je zakazana za ${formattedDate} u ${formattedTime}.`;
                
                // Obavezno dodavanje linka za online sastanak ako je tip konsultacije Online
                if (consultation.type === 'Online') {
                    // Proveravamo da li konsultacija ima link
                    if (!consultation.link || consultation.link.trim() === '') {
                        // Ako nema linka, dodajemo podrazumevani
                        const defaultZoomLink = 'https://zoom.us/j/12345678901?pwd=abcdefgh';
                        
                        // A≈æuriramo konsultaciju sa podrazumevanim linkom
                        consultations[index].link = defaultZoomLink;
                        localStorage.setItem('consultations', JSON.stringify(consultations));
                        
                        // Obave≈°tenje za admina
                        alert(`Dodat je podrazumevani Zoom link (${defaultZoomLink}) jer konsultacija nije imala definisan link.`);
                        
                        // Dodajemo link u poruku - POSEBNO FORMATIRANJE ZA BOLJU VIDLJIVOST SA KLIKABILNIM LINKOM
                        message += `\n\n---------------------------------\nLINK ZA PRISTUP ONLINE SASTANKU:\n<a href="${defaultZoomLink}" target="_blank" style="color: #007bff; text-decoration: underline; font-weight: bold;">üìû Pristupite Zoom sastanku</a>\n---------------------------------`;
                    } else {
                        // Imamo link, dodajemo ga u poruku - POSEBNO FORMATIRANJE ZA BOLJU VIDLJIVOST SA KLIKABILNIM LINKOM
                        message += `\n\n---------------------------------\nLINK ZA PRISTUP ONLINE SASTANKU:\n<a href="${consultation.link}" target="_blank" style="color: #007bff; text-decoration: underline; font-weight: bold;">üìû Pristupite Zoom sastanku</a>\n---------------------------------`;
                    }
                }
                
                // Slanje notifikacije klijentu
                sendNotification({
                    title: `Konsultacija je potvrƒëena`,
                    message: message,
                    type: 'Obave≈°tenje',
                    recipients: 'Pojedinaƒçni korisnik',
                    userEmail: consultation.email,
                    date: new Date().toISOString(),
                    status: 'Poslato'
                });
                
                // Osve≈æavanje prikaza
                loadConsultations();
                
                // Detaljna informacija za admina o poslatoj notifikaciji
                console.log("POSLATA NOTIFIKACIJA:", {
                    title: `Konsultacija je potvrƒëena`,
                    message: message,
                    email: consultation.email,
                    link: consultation.link
                });
                
                // Obave≈°tenje adminu sa detaljima o linku
                let linkInfo = consultation.type === 'Online' ? 
                    `\n\nLINK ZA SASTANAK: ${consultation.link}` : 
                    '';
                
                alert(`Obave≈°tenje o konsultaciji uspe≈°no poslato klijentu na email: ${consultation.email}${linkInfo}`);
            }
        }
        
        // Funkcija za pregled detalja konsultacije
        function viewConsultationDetails(id) {
            // Dobavljanje konsultacija iz localStorage
            const consultations = JSON.parse(localStorage.getItem('consultations') || '[]');
            
            // Pronala≈æenje konsultacije sa odgovarajuƒáim ID-om
            const consultation = consultations.find(consult => consult.id === id);
            
            // Ako je konsultacija pronaƒëena
            if (consultation) {
                // Formatiranje datuma i vremena
                const consultDate = new Date(`${consultation.date}T${consultation.time}`);
                const formattedDate = consultDate.toLocaleDateString('sr-RS');
                const formattedTime = consultDate.toLocaleTimeString('sr-RS', { hour: '2-digit', minute: '2-digit' });
                
                // Kreiranje modalnog prozora
                const modal = document.createElement('div');
                modal.style.position = 'fixed';
                modal.style.top = '0';
                modal.style.left = '0';
                modal.style.width = '100%';
                modal.style.height = '100%';
                modal.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
                modal.style.zIndex = '1000';
                modal.style.display = 'flex';
                modal.style.justifyContent = 'center';
                modal.style.alignItems = 'center';
                
                // Kreiranje sadr≈æaja modalnog prozora
                const modalContent = document.createElement('div');
                modalContent.style.backgroundColor = 'var(--bg-dark)';
                modalContent.style.padding = '2rem';
                modalContent.style.borderRadius = 'var(--border-radius)';
                modalContent.style.maxWidth = '600px';
                modalContent.style.width = '90%';
                modalContent.style.maxHeight = '80vh';
                modalContent.style.overflowY = 'auto';
                modalContent.style.border = '1px solid var(--border-light)';
                
                // Status konsultacije
                let statusText = '';
                let statusColor = '';
                switch(consultation.status) {
                    case 'pending':
                        statusText = 'Na ƒçekanju';
                        statusColor = '#f59e0b';
                        break;
                    case 'approved':
                        statusText = 'Odobrena';
                        statusColor = '#10b981';
                        break;
                    case 'rejected':
                        statusText = 'Odbijena';
                        statusColor = '#ef4444';
                        break;
                    case 'completed':
                        statusText = 'Zavr≈°ena';
                        statusColor = '#6366f1';
                        break;
                    case 'cancelled':
                        statusText = 'Otkazana';
                        statusColor = '#ef4444';
                        break;
                }
                
                // Status odobrenja
                let approvalText = '';
                let approvalColor = '';
                switch(consultation.approval) {
                    case 'pending':
                        approvalText = 'Na ƒçekanju';
                        approvalColor = '#f59e0b';
                        break;
                    case 'approved':
                        approvalText = 'Odobrena';
                        approvalColor = '#10b981';
                        break;
                    case 'rejected':
                        approvalText = 'Odbijena';
                        approvalColor = '#ef4444';
                        break;
                }
                
                // Sadr≈æaj modalnog prozora
                modalContent.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h2 style="margin: 0; color: var(--gold-bright);">Detalji konsultacije</h2>
                        <button id="closeModal" style="background: transparent; border: none; color: var(--light-text); font-size: 1.5rem; cursor: pointer;">√ó</button>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: var(--gold-pale);">Status:</span>
                        <span style="color: ${statusColor}; font-weight: bold;">${statusText}</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: var(--gold-pale);">Odobrenje:</span>
                        <span style="color: ${approvalColor}; font-weight: bold;">${approvalText}</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: var(--gold-pale);">Klijent obave≈°ten:</span>
                        <span style="color: var(--light-text); font-weight: bold;">${consultation.notified ? 'Da' : 'Ne'}</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: var(--gold-pale);">Kreirao:</span>
                        <span style="color: var(--light-text);">${consultation.createdBy || ADMIN_EMAIL}</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: var(--gold-pale);">Datum i vreme:</span>
                        <span style="color: var(--light-text);">${formattedDate} u ${formattedTime}</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: var(--gold-pale);">Klijent:</span>
                        <span style="color: var(--light-text);">${consultation.client}</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: var(--gold-pale);">Email:</span>
                        <span style="color: var(--light-text);">${consultation.email}</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: var(--gold-pale);">Telefon:</span>
                        <span style="color: var(--light-text);">${consultation.phone}</span>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: var(--gold-pale);">Tip konsultacije:</span>
                        <span style="color: var(--light-text);">${consultation.type}</span>
                    </div>
                    
                    ${consultation.link && consultation.type === 'Online' ? `
                    <div style="margin-bottom: 1rem;">
                        <span style="color: var(--gold-pale);">Link za sastanak:</span>
                        <div style="margin-top: 0.5rem;">
                            <a href="${consultation.link}" target="_blank" style="display: inline-block; padding: 0.5rem 1rem; background: var(--gold-dark); color: var(--bg-dark); text-decoration: none; border-radius: var(--border-radius); font-weight: bold;">
                                <i class="fas fa-video"></i> Pristupi online sastanku
                            </a>
                        </div>
                    </div>
                    ` : ''}
                    
                    <div style="margin-bottom: 1rem;">
                        <span style="color: var(--gold-pale);">Napomene:</span>
                        <div style="color: var(--light-text); padding: 0.5rem; background: rgba(31, 41, 55, 0.4); border-radius: var(--border-radius); margin-top: 0.5rem;">${consultation.notes || 'Nema dodatnih napomena'}</div>
                    </div>
                    
                    <div style="display: flex; justify-content: flex-end; gap: 0.5rem;">
                        <button id="contactClientBtn" style="padding: 0.5rem 1rem; background: var(--dark-accent); color: var(--gold-pale); border: 1px solid var(--gold-dark); border-radius: var(--border-radius); cursor: pointer;">
                            <i class="fas fa-envelope"></i> Kontaktiraj klijenta
                        </button>
                    </div>
                `;
                
                // Dodavanje modalnog prozora u DOM
                modal.appendChild(modalContent);
                document.body.appendChild(modal);
                
                // Event listener za zatvaranje modalnog prozora
                document.getElementById('closeModal').addEventListener('click', function() {
                    document.body.removeChild(modal);
                });
                
                // Event listener za dugme za kontakt klijenta
                document.getElementById('contactClientBtn').addEventListener('click', function() {
                    // Mo≈æemo otvoriti klijentov email ili pokazati kontakt informacije
                    const emailSubject = `Konsultacija zakazana za ${formattedDate}`;
                    let emailBody = `Po≈°tovani/a ${consultation.client},\n\nOvo je poruka u vezi Va≈°e konsultacije zakazane za ${formattedDate} u ${formattedTime}.`;
                    
                    // Dodavanje linka za online sastanak ako postoji
                    if (consultation.link && consultation.type === 'Online') {
                        emailBody += `\n\nLink za pristup online sastanku: ${consultation.link}`;
                    }
                    
                    emailBody += `\n\nSrdaƒçan pozdrav,\nVa≈° finansijski savetnik`;
                    
                    // Mo≈æemo otvoriti klijentov email (u stvarnoj aplikaciji)
                    // window.open(`mailto:${consultation.email}?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`);
                    
                    // Za sada ƒáemo samo prikazati informacije
                    alert(`Kontakt informacije klijenta:\nEmail: ${consultation.email}\nTelefon: ${consultation.phone}`);
                });
                
                // Event listener za klik izvan modalnog prozora
                modal.addEventListener('click', function(event) {
                    if (event.target === modal) {
                        document.body.removeChild(modal);
                    }
                });
            }
        }
        
        // Funkcija za brisanje konsultacije
        function deleteConsultation(id) {
            if (confirm('Da li ste sigurni da ≈æelite da obri≈°ete ovu konsultaciju?')) {
                // Dobavljanje konsultacija iz localStorage
                const consultations = JSON.parse(localStorage.getItem('consultations') || '[]');
                
                // Filtriranje konsultacija
                const updatedConsultations = consultations.filter(consult => consult.id !== id);
                
                // ƒåuvanje a≈æuriranih konsultacija
                localStorage.setItem('consultations', JSON.stringify(updatedConsultations));
                
                // Osve≈æavanje prikaza
                loadConsultations();
            }
        }
        
        // Inicijalizacija funkcija za konsultacije pri uƒçitavanju stranice
        document.addEventListener('DOMContentLoaded', function() {
            // Ostali inicijalizacioni kod veƒá postoji...
            
            // Inicijalizacija funkcija za konsultacije
            initConsultations();
        });
    </script>
</body>
</html>
